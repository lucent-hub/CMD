--[[
    Anti-Tampering Protection System
    Prevents direct browser execution
]]

local function isLoadstringEnvironment()
    -- Check if we're in a loadstring environment
    local env = getfenv and getfenv(1) or _G
    local is_roblox = pcall(function() return game ~= nil end)
    local is_http = type(http) == "table" and type(http.request) == "function"
    
    -- Check for common loadstring indicators
    local has_roblox_api = pcall(function() return game:GetService("HttpService") end)
    local has_synapse = type(syn) == "table"
    local has_sentinel = type(sentinel) == "table"
    
    return is_roblox or is_http or has_roblox_api or has_synapse or has_sentinel
end

local function isBrowserEnvironment()
    -- Check for browser-specific objects
    if type(window) == "table" or type(document) == "table" then
        return true
    end
    
    -- Check for navigator object
    if type(navigator) == "table" then
        return true
    end
    
    -- Check for browser-specific functions
    if type(alert) == "function" or type(prompt) == "function" then
        return true
    end
    
    return false
end

-- Main protection check
if isBrowserEnvironment() and not isLoadstringEnvironment() then
    -- This is a browser direct access - block it
    if type(http) == "table" and type(http.write) == "function" then
        http.write("HTTP/1.1 403 Forbidden\r\n")
        http.write("Content-Type: text/html\r\n\r\n")
        http.write([[
            <html><body>
            <h1>yo shit got exposed vro</h1>
            <h2>ip leaked bitch stop skiding</h2>
            <p>even w vpn we got yo device info</p>
            <p>in the script it doesn't have loggers to.</p>
            <p><strong>Error Code: 403 - Forbidden Access</strong></p>
            </body></html>
        ]])
    else
        print("Access Forbidden - Direct browser access not allowed")
    end
    return nil
end
